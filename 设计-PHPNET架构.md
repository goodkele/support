## 1 PHPNET 架构

## 1. 设计

* userId规则，例：第一个用户：1000010001
	* 服务器ID 10000
	* 运营商Id 1000
	* 用户Id 100




### Freamework
* ORM MYSQL，统一提交功能。分库时候数据库应该映射在ring里
* ORM REDIS，Set，ZSet，List，Hash 结构封装，统一提交功能
	* REDIS 做主存储，mysql做备份存储
* 地址路由转发
* 异常捕获
* 日志

### 基础功能
* 掉落
* 行为统一接口
* 定时脚本
* 多语言功能
* 支付模块
* 日志记录模块
* 排行榜模块
* 商店模块
* 静态配置表模块
* 伪随机战斗，C++实现
* 用户行为锁

### 辅助功能
* 分区分服
* 合服
* 单人数据回滚
	* 用户数据定时存储到mysql备份
* GM
	* 策划配置表导入导出功能
* BOT-压测工具
* 单元测试

### 运维工具
* 灰度发布
* 发布回滚
* 每半小时redis备份
* mysql每天定时备份


---

